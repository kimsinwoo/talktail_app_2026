# 톡테일(TalkTail) - 반려동물 건강 모니터링 앱 기획서

## 1. 프로젝트 개요

### 1.1 앱명
**톡테일 (TalkTail)** - 반려동물과의 소통을 통한 건강 관리 플랫폼

### 1.2 프로젝트 목적
반려동물의 건강 상태를 실시간으로 모니터링하고, 일상적인 건강 관리를 통해 질병의 조기 발견과 예방을 지원하는 통합 건강 관리 플랫폼을 제공합니다.

### 1.3 핵심 가치 제안
- **실시간 건강 모니터링**: BLE 웨어러블 디바이스를 통한 생체 신호 실시간 측정
- **데일리 건강 체크**: 간단한 체크리스트로 매일의 건강 상태 기록
- **데이터 기반 인사이트**: 수집된 데이터를 분석하여 건강 패턴 및 이상 징후 감지
- **AI 기반 건강 상담**: 반려동물 건강 관련 질문에 대한 AI 어시스턴트 지원
- **통합 건강 관리**: 일기, 산책 기록, 건강 리포트 등 다양한 건강 정보 통합 관리

---

## 2. 기획 의도 및 배경

### 2.1 문제 정의
1. **반려동물 건강 상태 파악의 어려움**
   - 반려동물은 자신의 불편함을 직접적으로 표현하지 못함
   - 질병의 초기 증상을 놓치기 쉬움
   - 정기적인 건강 체크의 어려움

2. **건강 데이터의 분산**
   - 일상적인 관찰 기록과 의료 기록이 분리되어 있음
   - 장기적인 건강 추세 파악이 어려움
   - 수의사와의 소통 시 정보 전달의 한계

3. **실시간 모니터링의 부재**
   - 웨어러블 디바이스가 있어도 데이터 통합 및 분석 기능 부족
   - 이상 징후 발생 시 즉각적인 알림 부재

### 2.2 해결 방안
1. **통합 건강 관리 플랫폼 구축**
   - 웨어러블 디바이스 데이터와 일상 기록을 통합 관리
   - 장기적인 건강 추세 분석 및 패턴 인식

2. **사용자 친화적인 건강 체크 시스템**
   - 복잡한 의료 용어 대신 직관적인 표현 사용
   - 3초 이내 입력 가능한 간단한 체크리스트
   - 행동 유도 중심의 UI/UX 설계

3. **실시간 모니터링 및 알림**
   - BLE 기반 웨어러블 디바이스 실시간 연동
   - 허브(Hub) 기반 다중 디바이스 관리
   - 이상 징후 감지 시 즉각적인 알림 제공

4. **AI 기반 건강 상담 지원**
   - 반려동물 건강 관련 질문에 대한 AI 어시스턴트 제공
   - 데이터 기반 맞춤형 건강 조언

---

## 3. 핵심 기능

### 3.1 홈 화면 (Home Screen)
**목적**: 사용자가 앱을 열었을 때 즉시 오늘 해야 할 일과 반려동물의 상태를 파악할 수 있도록 하는 액션 중심의 대시보드

#### 주요 구성 요소
1. **반려동물 프로필 영역**
   - 등록된 반려동물 정보 슬라이드 표시
   - 반려동물별 상태 요약 (정성적 표현)
   - 좌우 슬라이드로 여러 반려동물 전환

2. **코어 카드 ① - 데일리 건강 체크**
   - **미완료 상태**: "오늘 ○○의 상태 체크가 아직 안 되었어요"
   - **완료 상태**: "오늘의 상태 체크 완료"
   - 상태 체크 페이지로 이동

3. **코어 카드 ② - 일기**
   - **미작성 상태**: "○○의 하루를 기록해볼까요?"
   - **작성 완료**: "오늘은 이랬어요" + 한 줄 미리보기
   - 일기 작성/조회 페이지로 이동

4. **코어 카드 ③ - 최근 상태 흐름 요약**
   - 최근 건강 체크 기록 기반 정성적 요약
   - 예: "최근 3일간 식사량이 평소보다 적은 날이 있어요"
   - 상세 추세 페이지로 이동

5. **보조 카드 - 날씨 정보**
   - 오늘의 날씨 요약 (산책 적합 여부 등)
   - 확장 시 상세 정보 (온도, 습도, 풍속, 미세먼지)

6. **서비스 아이콘 그리드**
   - 웨어러블 모니터링
   - 피부 진단
   - 근처 병원 찾기
   - 이미지 생성
   - 건강 리포트
   - 건강 질문 도우미

### 3.2 실시간 모니터링 (Monitoring Screen)
**목적**: 웨어러블 디바이스를 통한 실시간 생체 신호 측정 및 모니터링

#### 주요 기능
1. **BLE 1:1 연결 모드**
   - 스마트폰과 웨어러블 디바이스 직접 연결
   - 실시간 생체 신호 수신 (심박수, 산소포화도, 체온 등)

2. **허브(Hub) 모드**
   - 허브를 통한 다중 디바이스 관리
   - 여러 반려동물 동시 모니터링
   - Socket.IO 기반 실시간 통신

3. **측정 기능**
   - 기본 측정: 심박수, 산소포화도, 스트레스 지수
   - 활동 측정: 활동량 기반 칼로리 계산
   - 측정 결과 저장 및 분석

4. **실시간 데이터 시각화**
   - 심박수 그래프
   - 체온 추이
   - 칼로리 소모량
   - 디바이스 배터리 상태

### 3.3 데일리 건강 체크 (Daily Health Check)
**목적**: 매일 간단하게 반려동물의 건강 상태를 기록하여 이상 징후의 조기 발견

#### 체크 항목
1. **식사 상태**: 잘 먹었어요 / 평소보다 적었어요 / 거의 안 먹었어요
2. **배변 상태**: 평소와 같아요 / 조금 달랐어요 / 많이 달랐어요
3. **활동량**: 평소와 비슷해요 / 조금 적었어요 / 많이 적었어요
4. **전반적인 컨디션**: 좋아 보여요 / 평소와 비슷해요 / 안 좋아 보여요
5. **특이사항** (선택): 없음 / 조금 있었어요 / 있었어요 → 텍스트 입력

#### 설계 원칙
- **직관적 표현**: 의료 용어 대신 보호자가 이해하기 쉬운 표현 사용
- **빠른 입력**: 3초 이내 입력 완료 가능
- **정성적 평가**: 수치화보다는 정성적 판단 중심

### 3.4 일기 (Diary)
**목적**: 반려동물의 하루를 자유롭게 기록하는 공간

#### 주요 기능
- 일기 작성 (텍스트, 이미지)
- 일기 목록 조회
- 일기 상세 보기
- 날짜별 필터링

### 3.5 최근 상태 흐름 (Recent Status Trend)
**목적**: 최근 건강 체크 기록을 분석하여 패턴과 추세를 파악

#### 주요 구성
1. **패턴 분석**
   - 최근 기록 기반 정성적 인사이트
   - 예: "최근 7일간 식사량이 평소보다 적은 날이 3일 있어요"

2. **일별 기록 테이블**
   - 날짜별 건강 체크 항목 표시
   - 아이콘으로 상태 시각화 (좋음/보통/나쁨)
   - 특이사항이 있는 날 강조 표시

3. **특이사항 목록**
   - 특이사항이 기록된 날짜와 내용 표시

### 3.6 건강 질문 도우미 (Health Question Assistant)
**목적**: AI 기반 반려동물 건강 상담 서비스

#### 주요 기능
- 채팅 형식의 건강 질문 인터페이스
- OpenAI 기반 AI 응답 (구현 예정)
- 반려동물별 컨텍스트 유지

### 3.7 이미지 생성 (Image Generation)
**목적**: 반려동물 사진을 기반으로 AI 이미지 생성

#### 주요 기능
- 갤러리에서 이미지 선택 또는 사진 촬영
- 프롬프트 입력 (선택)
- AI 이미지 생성
- 생성된 이미지 저장

### 3.8 근처 병원 찾기 (Hospital Finder)
**목적**: 현재 위치 기반 근처 동물병원 검색 및 안내

#### 주요 기능
- 현재 위치 기반 병원 검색
- 거리순 정렬
- 지도 앱 연동 (카카오맵, 네이버맵, 구글맵)
- 전화 연결
- 길찾기 기능

### 3.9 건강 리포트 (Health Report)
**목적**: 종합적인 건강 데이터 분석 및 리포트 제공

### 3.10 산책 기록 (Walk History)
**목적**: 산책 기록 관리 및 추적

### 3.11 디바이스 관리 (Device Management)
**목적**: 웨어러블 디바이스 등록 및 관리

#### 주요 기능
1. **BLE 1:1 연결 모드**
   - 스마트폰과 디바이스 직접 연결
   - 디바이스 등록 및 바인딩

2. **허브 프로비저닝 모드**
   - 허브를 통한 디바이스 등록
   - 다중 디바이스 관리

### 3.12 허브 콘솔 (Hub Console)
**목적**: 허브 디바이스 상태 모니터링 및 관리

---

## 4. 기술 스택

### 4.1 프론트엔드
- **프레임워크**: React Native 0.83.1
- **언어**: TypeScript 5.8.3
- **상태 관리**: Zustand 5.0.9
- **네비게이션**: React Navigation 7.x
- **UI 라이브러리**: Lucide React Native (아이콘)

### 4.2 하드웨어 연동
- **BLE 통신**: 
  - react-native-ble-manager 12.4.3
  - react-native-ble-plx 3.5.0
- **위치 서비스**: react-native-geolocation-service (예정)
- **WiFi**: react-native-wifi-reborn 4.13.6

### 4.3 백엔드 통신
- **HTTP 클라이언트**: Axios 1.13.2
- **실시간 통신**: 
  - Socket.IO Client 4.8.1
  - MQTT 5.14.1

### 4.4 알림
- **로컬 알림**: @notifee/react-native 9.1.8
- **백엔드 알림**: 폴링 기반 알림 서비스

### 4.5 데이터 저장
- **로컬 스토리지**: @react-native-async-storage/async-storage 2.2.0

### 4.6 이미지 처리
- **이미지 선택**: react-native-image-picker 8.2.1

### 4.7 기타
- **애니메이션**: react-native-reanimated 4.2.1
- **제스처**: react-native-gesture-handler 2.30.0
- **네트워크 상태**: @react-native-community/netinfo 11.4.1

---

## 5. 아키텍처

### 5.1 네비게이션 구조
```
App
├── AuthStack (비로그인 상태)
│   ├── Login
│   ├── Signup
│   └── SignupConsent
│
└── MainTabs (로그인 상태)
    ├── Home Tab
    ├── Monitoring Tab
    └── MyPage Tab
        │
        └── Stack Navigator
            ├── DailyHealthCheck
            ├── RecentStatusTrend
            ├── Diary
            ├── DiaryWrite
            ├── DiaryDetail
            ├── HealthConsultation
            ├── ImageGeneration
            ├── HospitalFinder
            ├── HealthReport
            ├── WalkHistory
            ├── PetManagement
            ├── PetRegister
            ├── PetEdit
            ├── DeviceManagement
            ├── HubConsole
            ├── DeviceRegister
            ├── MonitoringDetail
            ├── HealthCheckStart
            ├── HealthCheckResult
            ├── ProfileSettings
            ├── NotificationSettings
            ├── AppSettings
            └── CustomerSupport
```

### 5.2 상태 관리 구조
- **userStore**: 사용자 정보, 반려동물 목록
- **orgStore**: 조직/계정 관련 상태
- **hubStatusStore**: 허브 상태 및 연결된 디바이스
- **deviceStore**: 디바이스 정보
- **cartStore**: 장바구니 (현재 비활성화)
- **orderStore**: 주문 정보
- **backendDataStore**: 백엔드 데이터 캐시
- **boardStore**: 게시판 데이터

### 5.3 서비스 레이어
- **ApiService**: HTTP API 통신
- **BackendApiService**: 백엔드 API 통신
- **BLEService**: BLE 디바이스 통신
- **HubBLEService**: 허브 BLE 통신
- **HubSocketService**: 허브 Socket.IO 통신
- **HubMqttBridgeService**: 허브 MQTT 브릿지
- **NotificationService**: 로컬 알림
- **BackendNotificationService**: 백엔드 알림 폴링
- **TelemetryService**: 텔레메트리 데이터 처리
- **CalorieCalculationService**: 칼로리 계산

---

## 6. 주요 화면 구성

### 6.1 인증 화면
- **로그인 화면**: 이메일/비밀번호 로그인
- **회원가입 화면**: 사용자 정보 입력
- **약관 동의 화면**: 서비스 이용약관 동의

### 6.2 메인 탭
1. **홈 탭**: 액션 중심 대시보드
2. **모니터링 탭**: 실시간 생체 신호 모니터링
3. **마이페이지 탭**: 사용자 설정 및 관리

### 6.3 건강 관리 화면
- 데일리 건강 체크
- 최근 상태 흐름
- 건강 리포트
- 건강 질문 도우미
- 건강 체크 시작/결과

### 6.4 기록 관리 화면
- 일기 목록/작성/상세
- 산책 기록

### 6.5 디바이스 관리 화면
- 디바이스 등록
- 디바이스 관리
- 허브 콘솔
- BLE 연결

### 6.6 반려동물 관리 화면
- 반려동물 등록
- 반려동물 목록
- 반려동물 수정

### 6.7 설정 화면
- 프로필 설정
- 알림 설정
- 앱 설정 (권한 설정)
- 고객 지원

### 6.8 기타 화면
- 근처 병원 찾기
- 이미지 생성
- 주문 내역 (비활성화)
- 결제 수단 (비활성화)
- 즐겨찾기 (비활성화)

---

## 7. 데이터 모델

### 7.1 반려동물 (Pet)
- pet_code: 반려동물 고유 코드
- name: 이름
- breed: 견종/묘종
- species: 종 (dog/cat)
- weight: 체중
- gender: 성별
- neutering: 중성화 여부
- birthDate: 생년월일
- admissionDate: 입양일
- veterinarian: 담당 수의사
- diagnosis: 진단 정보
- medicalHistory: 병력

### 7.2 건강 체크 기록 (Daily Health Check)
- date: 날짜
- meal: 식사 상태
- poop: 배변 상태
- activity: 활동량
- condition: 컨디션
- specialNote: 특이사항

### 7.3 일기 (Diary)
- id: 일기 ID
- petCode: 반려동물 코드
- date: 날짜
- content: 내용
- images: 이미지 배열

### 7.4 텔레메트리 (Telemetry)
- deviceMac: 디바이스 MAC 주소
- timestamp: 타임스탬프
- heartRate: 심박수
- spO2: 산소포화도
- temperature: 체온
- stressIndex: 스트레스 지수
- battery: 배터리 상태

### 7.5 디바이스 (Device)
- macAddress: MAC 주소
- name: 디바이스 이름
- petCode: 연결된 반려동물 코드
- hubAddress: 연결된 허브 주소 (선택)

---

## 8. 사용자 시나리오

### 8.1 일상 건강 관리 시나리오
1. 사용자가 앱을 실행
2. 홈 화면에서 오늘의 상태 체크 미완료 확인
3. "오늘의 상태 체크하기" 버튼 클릭
4. 간단한 체크리스트 작성 (3초 이내)
5. 저장 완료 후 홈 화면으로 복귀
6. 필요 시 일기 작성

### 8.2 실시간 모니터링 시나리오
1. 모니터링 탭 진입
2. 웨어러블 디바이스 연결 (BLE 또는 허브)
3. 측정 시작
4. 실시간 생체 신호 확인
5. 측정 완료 후 결과 저장
6. 건강 리포트에 반영

### 8.3 이상 징후 감지 시나리오
1. 최근 상태 흐름 화면에서 패턴 분석 확인
2. "최근 3일간 식사량이 평소보다 적은 날이 있어요" 메시지 확인
3. 건강 질문 도우미에서 상담 요청
4. 필요 시 근처 병원 찾기로 병원 검색
5. 병원 예약 또는 방문

---

## 9. 향후 개발 계획

### 9.1 단기 계획
- [ ] 건강 질문 도우미 AI 연동 (OpenAI)
- [ ] 이미지 생성 AI 연동
- [ ] 실제 위치 기반 병원 찾기 (Geolocation API)
- [ ] 피부 진단 기능 구현
- [ ] 건강 리포트 상세 구현

### 9.2 중기 계획
- [ ] 웨어러블 디바이스 펌웨어 업데이트 기능
- [ ] 클라우드 데이터 동기화
- [ ] 수의사와의 데이터 공유 기능
- [ ] 건강 알림 및 리마인더 고도화

### 9.3 장기 계획
- [ ] 머신러닝 기반 건강 예측 모델
- [ ] 커뮤니티 기능 (반려동물 건강 정보 공유)
- [ ] 스토어 기능 재활성화 (반려동물 용품)
- [ ] 다국어 지원

---

## 10. 디자인 원칙

### 10.1 UI/UX 원칙
1. **액션 유도 중심**: 정보 나열보다는 행동 유도
2. **정성적 표현**: 수치/점수보다는 정성적 메시지
3. **직관적 인터페이스**: 복잡한 의료 용어 지양
4. **빠른 입력**: 3초 이내 입력 완료 가능
5. **일관된 간격**: 전문적이고 세련된 UI를 위한 일관된 간격 시스템

### 10.2 색상 시스템
- **Primary**: #2E8B7E (메인 컬러)
- **Accent**: #f0663f (강조 컬러)
- **Success**: #2E8B7E
- **Warning**: #FFB02E
- **Error**: #F03F3F
- **Background**: #F9F9F9
- **Text**: #333333, #666666, #888888

### 10.3 타이포그래피
- **헤더**: 18-20px, Bold
- **본문**: 14-16px, Regular/Medium
- **서브텍스트**: 12-14px, Regular
- **라벨**: 11-12px, Medium

---

## 11. 보안 및 개인정보 보호

### 11.1 인증
- JWT 토큰 기반 인증
- 토큰 만료 시 자동 로그아웃
- 401 오류 시 자동 인증 처리

### 11.2 데이터 보호
- 로컬 스토리지에 민감 정보 암호화 저장
- HTTPS 통신
- 사용자 동의 기반 데이터 수집

### 11.3 권한 관리
- 위치 정보: 병원 찾기 기능
- 카메라/갤러리: 이미지 선택
- 알림: 건강 알림 및 리마인더
- BLE: 웨어러블 디바이스 연결

---

## 12. 성능 최적화

### 12.1 앱 시작 속도
- 서비스 초기화 지연 로딩
- UI 우선 렌더링
- 백그라운드 서비스 비동기 초기화

### 12.2 데이터 최적화
- 텔레메트리 데이터 실시간 처리
- 불필요한 리렌더링 방지 (useMemo, useCallback)
- 이미지 최적화 (압축, 캐싱)

### 12.3 네트워크 최적화
- API 요청 최소화
- 폴링 간격 최적화 (12초)
- 오프라인 모드 지원 (향후)

---

## 13. 테스트 계획

### 13.1 단위 테스트
- 서비스 레이어 테스트
- 유틸리티 함수 테스트

### 13.2 통합 테스트
- API 통신 테스트
- BLE 통신 테스트
- 네비게이션 플로우 테스트

### 13.3 E2E 테스트
- 주요 사용자 시나리오 테스트
- 디바이스 연동 테스트

---

## 14. 배포 계획

### 14.1 플랫폼
- **Android**: Google Play Store
- **iOS**: App Store (향후)

### 14.2 버전 관리
- 시맨틱 버저닝 (Semantic Versioning)
- 현재 버전: 0.0.1

### 14.3 업데이트 전략
- 자동 업데이트 알림
- 강제 업데이트 (보안 이슈 시)

---

## 15. 참고 사항

### 15.1 현재 비활성화된 기능
- 스토어 기능 (쇼핑몰 관련 모든 기능)
- 장바구니
- 주문/결제
- 상품 상세
- 즐겨찾기

### 15.2 개발 환경
- Node.js: >= 18
- React Native: 0.83.1
- Android: minSdk 24, targetSdk 36
- iOS: (향후 지원)

---

## 16. 결론

톡테일(TalkTail)은 반려동물의 건강을 종합적으로 관리할 수 있는 통합 플랫폼입니다. 웨어러블 디바이스를 통한 실시간 모니터링과 일상적인 건강 체크를 결합하여, 반려동물의 건강 상태를 지속적으로 추적하고 이상 징후를 조기 발견할 수 있도록 지원합니다. 사용자 친화적인 인터페이스와 AI 기반 건강 상담을 통해, 반려동물 보호자가 더 쉽고 효과적으로 반려동물의 건강을 관리할 수 있도록 합니다.

---

**문서 버전**: 1.0  
**최종 업데이트**: 2026년 1월  
**작성자**: 개발팀

